{"ast":null,"code":"import _slicedToArray from\"C:/Users/anish/OneDrive/Desktop/scratch/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"../../../App.css\";import{useNavigate}from'react-router-dom';import Metadata from\"../home/componetns/layout/Metadata\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserDetail=function UserDetail(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userDetails=_useState2[0],setUserDetails=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loggedIn=_useState4[0],setLoggedIn=_useState4[1];var email=localStorage.getItem('email');var token=localStorage.getItem('token');useEffect(function(){if(token){var config={headers:{Authorization:\"Bearer \".concat(token)}};axios.get(\"https://dosomethingbackend-anish-stack.vercel.app/user/email/\".concat(email),config).then(function(response){setUserDetails(response.data.data);}).catch(function(error){console.error(\"Error fetching user details:\",error);setLoggedIn(false);// Handle errors by setting loggedIn to false\n});}else{setLoggedIn(false);}},[token,email]);var navigate=useNavigate();var handleLogout=function handleLogout(){localStorage.removeItem('token');setLoggedIn(false);};if(!loggedIn){return navigate('/login');// Redirect to login page after logout or in case of error\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"user-details-container\",children:[/*#__PURE__*/_jsx(Metadata,{title:\"user-detail\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:userDetails===null||userDetails===void 0?void 0:userDetails.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",userDetails===null||userDetails===void 0?void 0:userDetails.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Role: \",userDetails===null||userDetails===void 0?void 0:userDetails.role]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"id: \",userDetails===null||userDetails===void 0?void 0:userDetails._id]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"Logout\"})]});};export default UserDetail;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Metadata","jsx","_jsx","jsxs","_jsxs","UserDetail","_useState","_useState2","_slicedToArray","userDetails","setUserDetails","_useState3","_useState4","loggedIn","setLoggedIn","email","localStorage","getItem","token","config","headers","Authorization","concat","get","then","response","data","catch","error","console","navigate","handleLogout","removeItem","className","children","title","name","role","_id","onClick"],"sources":["C:/Users/anish/OneDrive/Desktop/scratch/frontend/src/componetns/layout/authentication/userDtail.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../../../App.css\";\r\nimport { useNavigate } from 'react-router-dom'; \r\nimport Metadata from \"../home/componetns/layout/Metadata\";\r\n\r\nconst UserDetail = () => {\r\n  const [userDetails, setUserDetails] = useState(null);\r\n  const [loggedIn, setLoggedIn] = useState(true);\r\n\r\n  const email = localStorage.getItem('email');\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      };\r\n\r\n      axios.get(`https://dosomethingbackend-anish-stack.vercel.app/user/email/${email}`, config)\r\n        .then((response) => {\r\n          setUserDetails(response.data.data);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error fetching user details:\", error);\r\n          setLoggedIn(false); // Handle errors by setting loggedIn to false\r\n        });\r\n    } else {\r\n      setLoggedIn(false);\r\n    }\r\n  }, [token, email]);\r\n\r\n  const navigate = useNavigate(); \r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    setLoggedIn(false);\r\n  };\r\n\r\n  if (!loggedIn) {\r\n    return navigate('/login'); // Redirect to login page after logout or in case of error\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-details-container\">\r\n      <Metadata title=\"user-detail\" />\r\n      <div className=\"user-card\">\r\n        <div className=\"user-avatar\">\r\n          {/* <img src={userDetails.avatar.Url} alt=\"User Avatar\" /> */}\r\n        </div>\r\n        <div className=\"user-info\">\r\n          <h2>{userDetails?.name}</h2>\r\n          <p>Email: {userDetails?.email}</p>\r\n          <p>Role: {userDetails?.role}</p>\r\n          <p>id: {userDetails?._id}</p>\r\n\r\n        </div>\r\n      </div>\r\n      <button onClick={handleLogout} className=\"logout-button\">\r\n        Logout\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}